<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Power BI Interview Flashcards</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: #f5f7fa;
            min-height: 100vh;
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            overflow: hidden;
            min-height: calc(100vh - 40px);
            display: flex;
            flex-direction: column;
        }

        .header {
            background: #2c3e50;
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2rem;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .header p {
            font-size: 1rem;
            opacity: 0.9;
        }

        .controls {
            padding: 20px;
            background: #f8f9fa;
            border-bottom: 1px solid #e9ecef;
            text-align: center;
        }

        .filter-buttons {
            display: flex;
            gap: 8px;
            margin-bottom: 16px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .filter-btn {
            padding: 10px 20px;
            border: 2px solid #e9ecef;
            background: white;
            color: #495057;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-weight: 500;
            font-size: 0.9rem;
        }

        .filter-btn.active {
            background: #3498db;
            color: white;
            border-color: #3498db;
        }

        .filter-btn:hover {
            border-color: #3498db;
            color: #3498db;
        }

        .filter-btn.active:hover {
            color: white;
        }

        .stats {
            display: flex;
            gap: 24px;
            font-size: 0.85rem;
            color: #6c757d;
            flex-wrap: wrap;
            justify-content: center;
            font-weight: 500;
        }

        .flashcard-container {
            padding: 32px 24px;
            min-height: 400px;
            flex: 1;
            overflow-y: auto;
            max-height: calc(100vh - 200px);
        }

        .question {
            font-size: 1.2rem;
            line-height: 1.6;
            margin-bottom: 20px;
            color: #2c3e50;
            font-weight: 500;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #3498db;
        }

        .answer {
            background: #e8f5e8;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #28a745;
            margin: 20px 0;
            display: none;
            font-size: 1rem;
            line-height: 1.6;
            color: #495057;
        }

        .answer.show {
            display: block;
        }

        @keyframes fadeIn {
            from { 
                opacity: 0; 
                transform: translateY(15px) scale(0.98); 
            }
            to { 
                opacity: 1; 
                transform: translateY(0) scale(1); 
            }
        }

        .action-buttons {
            display: flex;
            gap: 12px;
            margin: 24px 0;
            flex-wrap: wrap;
            justify-content: center;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 600;
            transition: all 0.2s ease;
            min-width: 120px;
        }

        .btn-primary {
            background: #007bff;
            color: white;
        }

        .btn-primary:hover {
            background: #0056b3;
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-success:hover {
            background: #1e7e34;
        }

        .btn-warning {
            background: #ffc107;
            color: #212529;
        }

        .btn-warning:hover {
            background: #e0a800;
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #545b62;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
            gap: 16px;
        }


        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: #6c757d;
            background: #f8f9fa;
            border-radius: 8px;
            margin: 20px 0;
        }

        .empty-state h3 {
            font-size: 1.5rem;
            margin-bottom: 12px;
            color: #495057;
            font-weight: 600;
        }

        .empty-state p {
            font-size: 1rem;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #28a745;
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            font-weight: 600;
            z-index: 1000;
            transform: translateX(400px);
            transition: transform 0.3s ease;
        }

        .notification.show {
            transform: translateX(0);
        }


        @media (max-width: 768px) {
            body {
                padding: 10px;
            }

            .container {
                margin: 0;
                border-radius: 8px;
                min-height: calc(100vh - 20px);
            }

            .header {
                padding: 20px;
            }

            .header h1 {
                font-size: 1.5rem;
            }

            .controls {
                padding: 16px;
            }

            .filter-buttons {
                gap: 6px;
                margin-bottom: 12px;
            }

            .filter-btn {
                padding: 8px 16px;
                font-size: 0.85rem;
            }

            .stats {
                gap: 16px;
                font-size: 0.8rem;
            }

            .flashcard-container {
                padding: 16px;
            }

            .question {
                font-size: 1.1rem;
                padding: 16px;
            }

            .answer {
                padding: 16px;
                font-size: 0.95rem;
            }

            .action-buttons {
                flex-direction: column;
                gap: 8px;
                margin: 16px 0;
            }

            .btn {
                width: 100%;
                padding: 14px 20px;
            }

            .navigation {
                flex-direction: column;
                gap: 12px;
                margin-top: 16px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Power BI Interview Flashcards</h1>
            <p>Master your Power BI and Business Intelligence interview preparation</p>
        </div>

        <div class="controls">
            <div class="filter-buttons">
                <button class="filter-btn active" id="filter-all">All</button>
                <button class="filter-btn" id="filter-tech">Technical</button>
                <button class="filter-btn" id="filter-beh">Behavioral</button>
            </div>

            <div class="stats">
                <span id="progress">1 of 90</span>
                <span id="mastered-count">‚úì 0 mastered</span>
            </div>
        </div>

        <div class="flashcard-container">
            <div id="flashcard-content">
                <div class="question" id="question"></div>
                <div class="action-buttons">
                    <button class="btn btn-primary" id="show-answer">Show Answer</button>
                </div>
                <div class="answer" id="answer"></div>
                <div class="action-buttons" id="status-buttons" style="display: none;">
                    <button class="btn btn-success" id="btn-mastered">‚úì Got it!</button>
                    <button class="btn btn-warning" id="btn-review">üîÑ Review later</button>
                </div>
                <div class="navigation">
                    <button class="btn btn-secondary" id="prev">‚Üê Previous</button>
                    <button class="btn btn-secondary" id="next">Next ‚Üí</button>
                </div>
            </div>
            <div id="empty-state" class="empty-state" style="display: none;">
                <h3>üéâ All done!</h3>
                <p>You've mastered all questions in this category. Try another category or reset your progress.</p>
            </div>
        </div>
    </div>

    <div id="notification" class="notification"></div>

    <script>
        // Question data loaded from external JSON file
        let cards = [];
        
        // Load questions from JSON file or use embedded fallback
        async function loadQuestions() {
            try {
                const response = await fetch('questions.json');
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const data = await response.json();
                cards = data.questions;
                console.log(`‚úÖ Loaded ${cards.length} questions from questions.json`);
                displayCard(); // Display first card after loading
            } catch (error) {
                console.error('‚ùå Error loading questions from JSON, using embedded questions:', error);
                // Use embedded questions as fallback
                cards = embeddedQuestions;
                console.log(`üîÑ Using embedded fallback with ${cards.length} questions`);
                displayCard();
            }
        }

        // Embedded questions as fallback (loaded from questions.json)
        const embeddedQuestions = [
          {
            q: "Tell me about yourself / walk me through your background",
            type: "beh",
            a: "I'm a Power BI developer with 6+ years of experience in business intelligence and data analytics. I started my career with a bachelor's degree in economics, which gave me a strong foundation in data analysis and business understanding.\n\nOver the years, I've specialized in the Microsoft Power Platform ecosystem, particularly Power BI, Power Query, and DAX. I've led several major projects including:\n‚Ä¢ Converting legacy Tableau dashboards to Power BI, improving performance by 30%\n‚Ä¢ Building enterprise-scale data models serving 500+ users\n‚Ä¢ Implementing automated ETL processes using Power Query and SQL\n‚Ä¢ Creating self-service analytics solutions that reduced manual reporting by 60%\n\nI'm particularly drawn to this role because it combines my technical skills in Power BI with the opportunity to work on meaningful government transformation projects. I enjoy the challenge of turning complex data into actionable insights that drive real business decisions."
          },
          {
            q: "Why do you want to work at AGR (or for this company)?",
            type: "beh",
            a: "I'm excited about AGR's mission of digital transformation in the public sector. What particularly draws me to AGR is your approach of being a transformation partner rather than just a technology vendor - you focus on solving real business problems, not just implementing technology for its own sake.\n\nI'm particularly interested in government and federal work because:\n‚Ä¢ The structured requirements and compliance considerations push me to build robust, maintainable systems\n‚Ä¢ The scale and impact of public sector projects means my work directly benefits citizens and government operations\n‚Ä¢ The complexity of legacy systems and data integration challenges align perfectly with my Power BI and data modeling expertise\n\nThis role specifically matches my strengths - converting legacy dashboards, using Power Platform tools, and working full-stack. I believe I can contribute immediately while growing into more leadership responsibilities within these high-stakes, high-impact engagements."
          },
          {
            q: "Describe a challenging Power BI / BI project you did. What was the problem, how you solved it, results?",
            type: "beh",
            a: "SITUATION: At my previous organization, different business units were using independent dashboards built in Excel and Tableau, resulting in inconsistent metrics, outdated data, and high manual effort in reconciling numbers. This created confusion during executive meetings when different departments presented conflicting data.\n\nTASK: I was given ownership to consolidate and migrate all departmental dashboards into a unified Power BI platform while ensuring data accuracy, performance, and stakeholder buy-in.\n\nACTION:\n‚Ä¢ Conducted discovery sessions with each unit to understand KPIs, definitions, and data sources\n‚Ä¢ Designed a canonical data model using star schema in SQL to unify the backend structure\n‚Ä¢ Built ETL pipelines using Power Query with error handling and staging layers\n‚Ä¢ Implemented parameter-driven filtering and optimized DAX measures using variables to reduce scan costs\n‚Ä¢ Set up incremental refresh with monthly partitions to reduce load times\n‚Ä¢ Rolled out dashboards gradually with feedback cycles and user training\n\nRESULT:\n‚Ä¢ All units migrated to Power BI within 3 months\n‚Ä¢ Refresh failures dropped by 60% and report load times improved by 30%\n‚Ä¢ Stakeholders appreciated the consistency and self-service capabilities\n‚Ä¢ Reduced manual reporting time by 40% across all departments"
          },
          {
            q: "What is Power BI? Describe its main components.",
            type: "tech",
            a: "Power BI is Microsoft's comprehensive business analytics service for visualizing data and sharing insights across organizations. The main components include:\n\n‚Ä¢ POWER BI DESKTOP: The authoring tool where you build reports locally. Features include:\n  - Connect to various data sources (SQL Server, Excel, APIs, etc.)\n  - Transform data using Power Query (M language)\n  - Build data models and create relationships\n  - Write DAX measures and calculated columns\n  - Design interactive visuals and reports\n\n‚Ä¢ POWER BI SERVICE (PowerBI.com): The cloud platform for:\n  - Publishing and sharing reports and dashboards\n  - Scheduling data refreshes\n  - Managing workspaces and app distribution\n  - Setting up row-level security (RLS)\n  - Collaboration and commenting\n\n‚Ä¢ POWER BI GATEWAY: Enables secure connection between on-premises data sources and Power BI Service, handling live and scheduled refreshes.\n\n‚Ä¢ POWER BI DATAFLOWS: Reusable ETL pipelines in the service that standardize data preparation and enable data reuse across multiple reports.\n\n‚Ä¢ DATASETS, REPORTS, DASHBOARDS: The core artifacts where datasets provide the data model, reports contain multi-page visuals, and dashboards pin key visuals for executive views."
          },
          {
            q: "What's the difference between a measure and a calculated column?",
            type: "tech",
            a: "CALCULATED COLUMNS:\n‚Ä¢ Computed row by row when the model is processed/refreshed\n‚Ä¢ Values are stored physically in the model (increases model size)\n‚Ä¢ Use row context - can reference other columns in the same row\n‚Ä¢ Best for: concatenation, flags, lookups, row-level calculations\n‚Ä¢ Example: FullName = [FirstName] & \" \" & [LastName]\n\nMEASURES:\n‚Ä¢ Evaluated at query time when placed in visuals\n‚Ä¢ Not stored - calculated dynamically based on filter context\n‚Ä¢ Use filter context - respond to slicers, filters, and visual context\n‚Ä¢ Best for: aggregations, KPIs, dynamic calculations\n‚Ä¢ Example: Total Sales = SUM(Sales[Amount])\n\nKEY DIFFERENCES:\n‚Ä¢ Performance: Measures are more efficient for aggregations\n‚Ä¢ Storage: Calculated columns increase model size\n‚Ä¢ Context: Columns use row context, measures use filter context\n‚Ä¢ Flexibility: Measures adapt to different filter contexts automatically\n\nBEST PRACTICE: Use measures whenever possible, calculated columns only when you need row-level values that don't depend on filters."
          }
        ];

        // App state
        let reviewLater = new Set();
        let notes = new Map();
        let studyMode = "practice";
        let difficulty = "all";
        let timerInterval = null;
        let timerSeconds = 0;
        let studyStreak = 0;
        let lastStudyDate = null;
        let sessionStats = {
            questionsAnswered: 0,
            correctAnswers: 0,
            timeSpent: 0
        };

        // Load saved state from localStorage
        function loadState() {
            const savedMastered = localStorage.getItem('powerbi-flashcards-mastered');
            const savedReview = localStorage.getItem('powerbi-flashcards-review');
            const savedBookmarked = localStorage.getItem('powerbi-flashcards-bookmarked');
            const savedNotes = localStorage.getItem('powerbi-flashcards-notes');
            const savedStreak = localStorage.getItem('powerbi-flashcards-streak');
            const savedLastStudy = localStorage.getItem('powerbi-flashcards-last-study');
            
            if (savedMastered) {
                mastered = new Set(JSON.parse(savedMastered));
            }
            if (savedReview) {
                reviewLater = new Set(JSON.parse(savedReview));
            }
            if (savedBookmarked) {
                bookmarked = new Set(JSON.parse(savedBookmarked));
            }
            if (savedNotes) {
                notes = new Map(JSON.parse(savedNotes));
            }
            if (savedStreak) {
                studyStreak = parseInt(savedStreak) || 0;
            }
            if (savedLastStudy) {
                lastStudyDate = savedLastStudy;
            }
            
            updateStudyStreak();
        }

        // Save state to localStorage
        function saveState() {
            localStorage.setItem('powerbi-flashcards-mastered', JSON.stringify([...mastered]));
            localStorage.setItem('powerbi-flashcards-review', JSON.stringify([...reviewLater]));
            localStorage.setItem('powerbi-flashcards-bookmarked', JSON.stringify([...bookmarked]));
            localStorage.setItem('powerbi-flashcards-notes', JSON.stringify([...notes]));
            localStorage.setItem('powerbi-flashcards-streak', studyStreak.toString());
            localStorage.setItem('powerbi-flashcards-last-study', lastStudyDate);
        }

        // Get filtered and non-mastered card indices
        function getFilteredIndices() {
            return cards
                .map((card, index) => ({ card, index }))
                .filter(({ card, index }) => {
                    if (currentFilter === "all") return true;
                    return card.type === currentFilter;
                })
                .filter(({ index }) => !mastered.has(index))
                .map(({ index }) => index);
        }

        // Update statistics
        function updateStats() {
            const total = cards.length;
            const masteredCount = mastered.size;
            
            document.getElementById('mastered-count').textContent = `‚úì ${masteredCount} mastered`;
        }

        // Display current card
        function displayCard() {
            const filteredIndices = getFilteredIndices();
            
            if (filteredIndices.length === 0) {
                document.getElementById('flashcard-content').style.display = 'none';
                document.getElementById('empty-state').style.display = 'block';
                return;
            }

            document.getElementById('flashcard-content').style.display = 'block';
            document.getElementById('empty-state').style.display = 'none';

            // Clamp current index
            if (currentIndex < 0) currentIndex = 0;
            if (currentIndex >= filteredIndices.length) currentIndex = filteredIndices.length - 1;

            const cardIndex = filteredIndices[currentIndex];
            const card = cards[cardIndex];

            // Update UI elements
            document.getElementById('question').textContent = card.q;
            document.getElementById('answer').textContent = card.a;
            document.getElementById('answer').classList.remove('show');
            document.getElementById('status-buttons').style.display = 'none';
            document.getElementById('show-answer').style.display = 'inline-block';

            // Update progress
            document.getElementById('progress').textContent = `${currentIndex + 1} of ${filteredIndices.length}`;

            updateStats();
        }

        // Show answer
        function showAnswer() {
            document.getElementById('answer').classList.add('show');
            document.getElementById('status-buttons').style.display = 'flex';
            document.getElementById('show-answer').style.display = 'none';
        }

        // Show notification
        function showNotification(message) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // Mark as mastered
        function markMastered() {
            const filteredIndices = getFilteredIndices();
            const cardIndex = filteredIndices[currentIndex];
            mastered.add(cardIndex);
            saveState();
            
            showNotification('Question marked as mastered!');
            
            // Move to next card
            currentIndex++;
            displayCard();
        }

        // Mark for review later
        function markReviewLater() {
            const filteredIndices = getFilteredIndices();
            const cardIndex = filteredIndices[currentIndex];
            reviewLater.add(cardIndex);
            saveState();
            
            showNotification('Question marked for review later');
            
            // Move to next card
            currentIndex++;
            displayCard();
        }

        // Navigate to previous card
        function previousCard() {
            currentIndex--;
            displayCard();
        }

        // Navigate to next card
        function nextCard() {
            currentIndex++;
            displayCard();
        }

        // Change filter
        function changeFilter(filter) {
            currentFilter = filter;
            currentIndex = 0;
            
            // Update filter buttons
            document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById(`filter-${filter}`).classList.add('active');
            
            displayCard();
        }

        // Reset progress
        function resetProgress() {
            if (confirm('Are you sure you want to reset all progress? This will unmark all mastered questions.')) {
                mastered.clear();
                reviewLater.clear();
                saveState();
                currentIndex = 0;
                displayCard();
            }
        }

        // Event listeners
        document.getElementById('show-answer').addEventListener('click', showAnswer);
        document.getElementById('btn-mastered').addEventListener('click', markMastered);
        document.getElementById('btn-review').addEventListener('click', markReviewLater);
        document.getElementById('prev').addEventListener('click', previousCard);
        document.getElementById('next').addEventListener('click', nextCard);
        document.getElementById('filter-all').addEventListener('click', () => setFilter('all'));
        document.getElementById('filter-tech').addEventListener('click', () => setFilter('tech'));
        document.getElementById('filter-beh').addEventListener('click', () => setFilter('beh'));

        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            // Prevent shortcuts when typing in input fields
            if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') return;
            
            switch(e.key) {
                case ' ':
                case 'Enter':
                    e.preventDefault();
                    if (document.getElementById('show-answer').style.display !== 'none') {
                        showAnswer();
                    }
                    break;
                case 'ArrowLeft':
                    e.preventDefault();
                    previousCard();
                    break;
                case 'ArrowRight':
                    e.preventDefault();
                    nextCard();
                    break;
                case 'm':
                case 'M':
                    e.preventDefault();
                    if (document.getElementById('status-buttons').style.display !== 'none') {
                        markMastered();
                    }
                    break;
                case 'r':
                case 'R':
                    e.preventDefault();
                    if (document.getElementById('status-buttons').style.display !== 'none') {
                        markReviewLater();
                    }
                    break;
            }
        });

        // Initialize app
        loadState();
        loadQuestions(); // Load questions from JSON file
    </script>
</body>
</html>
